package r.k.d.m.exploit;

import net.minecraft.util.math.BlockPos;
import net.minecraft.network.Packet;
import net.minecraft.util.EnumFacing;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import r.k.h;
import net.minecraftforge.client.event.MouseEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.network.play.client.CPacketAnimation;
import r.k.d.o.h.u;
import r.k.d.o.m;
import r.k.d.c.y;
import r.k.d.m.g$i;
import r.k.d.m.g;

@g$i(name = "NoSwing", description = "Prevents the swing animation for others", category = y.EXPLOIT)
public class NoSwing extends g
{
    private final m<g$s> tt;
    public static final int tn;
    public static final boolean ti;
    
    public NoSwing() {
        super();
        this.tt = (m<g$s>)new u("Mode", this, g$s.shv);
    }
    
    @SubscribeEvent
    public void d(final r.k.r.h.y y) {
        if (y.packet instanceof CPacketAnimation) {
            y.setCanceled(true);
        }
    }
    
    @SubscribeEvent
    public void d(final MouseEvent mouseEvent) {
        if (!this.lo() || this.tt.yv() != g$s.shj) {
            return;
        }
        if (mouseEvent.getButton() == 0 && NoSwing.mc.objectMouseOver.entityHit == null) {
            final BlockPos blockPos = NoSwing.mc.objectMouseOver.getBlockPos();
            h.xv().sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, blockPos, EnumFacing.UP));
            h.xv().sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, blockPos, EnumFacing.UP));
            mouseEvent.setCanceled(true);
        }
        if (mouseEvent.getButton() == 0 && NoSwing.mc.objectMouseOver.entityHit != null) {
            mouseEvent.setCanceled(true);
        }
    }
}
